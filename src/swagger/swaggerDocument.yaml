openapi: 3.0.0
info: 
  title: GUIA-TURISTICO-MARANHÃO
    version: 1.0.0
  description: 'API que alimenta website de guia de turismo do Maranhão - Desafio 5 Programa Trilhas 2024'
  contact: 
    name: Suporte a Devs
    email: gabrielfelipecarvalho1@gmail.com
  license:
    name: "Lincença: GPLv3"
    url: https://www.gnu.org/licenses/gpl-3.0.html
externalDocs:
  description: Link repositório
  url: https://github.com/Desafio5-Trilhas/ApiGuiaTuristico
tags:
- name: Usuários
  description: Ações quanto ao usuário
servers:
  - url: https://api-guia-turistico.vercel.app/
  - url: http://localhost:3000/
paths:
  /api/usuario/signup:
    post:
      tags:
      - Usuários
      summary: Cria um novo usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nome:
                  type: string
                email:
                  type: string
                senha:
                  type: string
                documento:
                  type: string
      responses:
        201:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Usuário criado com sucesso."
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"       
        422:
          description: Erros de validação
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
  /api/usuario/login:
    post:
      summary: Autentica um usuário existente
      tags:
        - Usuários
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                senha:
                  type: string
      responses:
        200:
          description: Autenticação bem-sucedida
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  acess_token:
                    type: string
        400:
          description: Credenciais Inválidas
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError" 

        401:
          description: 	API Key inválida
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"
  /api/usuario/sendEmail:
    post:
      summary: Envia um email para o nosso suporte da landing page
      tags:
        - Usuários
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                message:
                  type: string
                nameUsuario:
                  type: string  
                where:
                  type: string
      responses:
        200:
          description: E-mail enviado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        400:
          description: Erro durante o envio do e-mail
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string

        401:
          description: 	API Key inválida
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError" 
  /api/usuario:
    get:
      summary: Retorna todos os usuários
      tags:
      - Usuários
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Usuario"
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        500:
          description: Internal Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                  message:
                    type: string        
    delete:
      summary: Deleta usuário
      tags:
      - Usuários
      parameters:
      - name: email
        in: path
        schema: 
          type: string
        required: true
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Usuário deletado."
        404:
          description: Falha ao executar
          content:
            application/json:
              example: "Usuario não encontrado."
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        500:
          description: Internal Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                  message:
                    type: string        
  /api/usuario/{email}:
    get:
      summary: Retorna informações cadastradas do usuário
      tags:
      - Usuários
      parameters:
      - name: email
        in: path
        schema: 
          type: string
        required: true
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Usuario"
        404:
          description: Falha ao executar
          content:
            application/json:
              example: "Usuario não encontrado."
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        500:
          description: Internal Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                  message:
                    type: string        
    put:
      summary: Altera as informações cadastradas do usuário
      tags:
      - Usuários
      parameters:
      - name: email
        in: path
        schema: 
          type: string
        required: true
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Usuario"
        404:
          description: Falha ao executar
          content:
            application/json:
              example: "Usuario não encontrado."
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        500:
          description: Internal Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                  message:
                    type: string        
  /api/destino:
    post:
      tags:
      - Destinos
      summary: Cria um novo destino
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                titulo:
                  type: string
                descricao:
                  type: string
      responses:
        201:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Destino criado com sucesso."
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"       
        422:
          description: Erros de validação
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
    get:
      summary: Retorna todos os destinos
      tags:
      - Destinos
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Destino"   
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        500:
          description: Internal Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                  message:
                    type: string        
  /api/destino/{id}:
    put:
      summary: Altera as informações cadastradas do destino
      tags:
      - Destinos
      parameters:
      - name: email
        in: path
        schema: 
          type: string
        required: true
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                example: 'Destino atualizado.'
        404:
          description: Falha ao executar
          content:
            application/json:
              example: "Destino não encontrado."
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        500:
          description: Internal Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                  message:
                    type: string        
    get:
      summary: Retorna informações cadastradas do destino
      tags:
      - Destinos
      parameters:
      - name: id
        in: path
        schema: 
          type: integer
        required: true
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  id_destino:
                    type: integer
                  titulo:
                    type: string
                  descricao:
                    type: string
                  imagens:
                    type: array
                    items:
                      $ref: '#/components/schemas/Imagem'
                  rotas:
                    type: array
                    items:
                      $ref: '#/components/schemas/Rota'
                  missoes:
                    type: array
                    items:
                      $ref: '#/components/schemas/Missao'
        404:
          description: Falha ao executar
          content:
            application/json:
              example: "Destino não encontrado."
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        500:
          description: Internal Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                  message:
                    type: string  
    delete:
      summary: Deleta destino
      tags:
      - Destinos
      parameters:
      - name: id_destino
        in: path
        schema: 
          type: id
        required: true
      responses:
        200:
          description: Sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Destino deletado."
        404:
          description: Falha ao executar
          content:
            application/json:
              example: "Usuario não encontrado."
        403:
          description: API Key não fornecida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        401:
          description: API Key inválida
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKeyError"   
        500:
          description: Internal Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                  message:
                    type: string              
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: x-api-key
      description: API Key necessária para autenticação
  schemas:
    Usuario:
      type: object
      properties:
        id_usuario:
          type: integer
        nome:
          type: string
        email:
          type: string
        status_conta:
          type: string
        documento:
          type: string
    Destino:
      type: object
      properties:
        id_destino:
          type: integer
        titulo: 
          type: string
        descricao:
          type: string
      schemas:
    Imagem:
      type: object
      properties:
        id_imagem:
          type: integer
        link:
          type: string
          format: uri
        id_destino:
          type: integer
    Rota:
      type: object
      properties:
        id_rota:
          type: integer
        id_destino:
          type: integer
        nome:
          type: string
        tipo:
          type: string
    Missao:
      type: object
      properties:
        id_missao:
          type: integer
        id_destino:
          type: integer
        descricao:
          type: string
        dica1:
          type: string
        dica2: 
          type: string
    ApiKeyError:
      type: object
      properties:
        error:
          type: string  

security:
  - ApiKeyAuth: []